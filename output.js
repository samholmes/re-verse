function createScope(i){var e={},n=function(n,t){if(t)return e[n]=new Thing(n,t.items,t.keys);var t;return t=e[n],t||(t="function"==typeof i?i(n):new Thing(n,[],{})),t};return n}function Thing(i,e,n){Array.isArray(i)||(i=[i]);var t=i[i.length-1];this.items=e||[],this.keys=n||{},this.identifiers=i,this.identifier=t}function destructure(i,e,n){i.identifiers.forEach(function(t,r){if(e.keys[t])var s=e.keys[t];else if(e.items[r])var s=e.items[r];else if(i.keys[t])var s=i.keys[t];else if(t===i.identifier)var s=i.items[0];var o=new Thing(t,[s]);n(t,o)})}function lambda(i){return new Thing(null,[i])}function error(i){throw new Error("Runtime Error: "+i)}var scope=createScope();Thing.prototype.is=function(i,e){return e(this.identifier,i)},Thing.prototype.and=function(i){var e=new Thing([this.identifier,i.identifier]);return e.items=this.items.concat(i.items),e.keys=Object.assign(this.keys,i.keys),e},Thing.prototype.as=function(i){var e=new Thing(this.identifier);return e.keys[i.identifier]=this,e},Thing.prototype["in"]=function(i){var e=i.keys[this.identifier];return e||(e=new Thing(null,[])),e},Thing.prototype.to=function(i){var e=i.items[0];return"function"==typeof e?e(this):void error(i.identifier+" is not a function.")};
// END OF RUNTIME

scope("log",lambda(function(o){console.log(o)})),scope("print",lambda(function(o){console.log(o.items)}));
// END OF NATIVE

(new Thing(null, ["Hello world"],{})).to(scope("print"));
